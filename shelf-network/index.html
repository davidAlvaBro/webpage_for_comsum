<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Shelf Network | Social Graph of Books</title><script src=https://cdn.tailwindcss.com></script><script src=https://unpkg.com/feather-icons></script><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><style type=text/tailwindcss>
    @layer base {
        body {
          @apply bg-gray-100;
          @apply font-sans;
          @apply leading-normal;
          @apply tracking-normal;
        }
        p {
          @apply py-6;
        }
        a {
          @apply text-green-500;
          @apply no-underline;
          @apply hover:underline;
        }
        h1 {
          @apply py-2;
          @apply font-sans;
          @apply text-2xl;
        }
        h2 {
          @apply py-2;
          @apply font-sans;
          @apply text-xl;
        }
        h3 {
          @apply py-2;
          @apply font-sans;
          @apply text-lg;
        }
        ol {
          @apply px-8;
          @apply list-decimal;
        }
        ul {
          @apply px-8;
          @apply list-disc;
        }
        blockquote {
          @apply border-l-4; 
          @apply border-green-500;
          @apply italic;
          @apply my-8;
          @apply pl-8;
          @apply md:pl-12;
        }
        pre {
          @apply bg-gray-900;
          @apply rounded;
          @apply text-white; 
          @apply font-mono;
          @apply text-base;
          @apply my-4;
          @apply p-2;
          @apply md:p-4;
        }
        table {
          @apply shadow-md;
          @apply rounded-lg;
          @apply m-auto;
          @apply my-8;
        }
        thead {
          @apply bg-gray-50;
        }
        th {
          @apply py-3;
          @apply px-6;
          @apply text-xs;
          @apply font-medium;
          @apply tracking-wider;
          @apply text-left;
          @apply text-gray-700;
          @apply uppercase;
        }
        tr {
          @apply bg-white;
          @apply border-b;
        }
        td {
          @apply py-4;
          @apply px-6;
          @apply text-sm;
          @apply font-medium;
          @apply text-gray-900;
          @apply whitespace-nowrap;
        }
        img {
          @apply m-auto;
          @apply object-cover;
        }
        .footer-icon {
          width: 64px; 
          height: 64px;
          @apply mx-4;
        }
      }
    </style></head><body><nav id=header class="fixed w-full z-10 top-0"><div id=progress class="h-1 z-20 top-0" style="background:linear-gradient(to right,#4dc0b5 var(--scroll),transparent 0)"></div><div class="w-full md:max-w-4xl mx-auto flex flex-wrap items-center justify-between mt-0 py-3"><div class=pl-4><a class="text-gray-900 text-base no-underline hover:no-underline font-extrabold text-xl" href=https://davidAlvaBro.github.io/webpage_for_comsum/>Social Graph of Books</a></div><div class="block lg:hidden pr-4"><button id=nav-toggle class="flex items-center px-3 py-2 border rounded text-gray-500 border-gray-600 hover:text-gray-900 hover:border-green-500 appearance-none focus:outline-none"><svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg></button></div><div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block mt-2 lg:mt-0 bg-gray-100 md:bg-transparent z-20" id=nav-content><ul class="list-reset lg:flex justify-end flex-1 items-center list-none px-0"><li><a class="inline-block py-2 px-4 text-gray-900 no-underline" href=../data-description>Data</a></li><li><a class="inline-block py-2 px-4 text-gray-900 no-underline" href=../shelf-network>Shelf Network</a></li><li><a class="inline-block py-2 px-4 text-gray-900 no-underline" href=../nlp-network>NLP Network</a></li><li><a class="inline-block py-2 px-4 text-gray-900 no-underline" href=../findings>Findings</a></li></ul></div></div></nav><div class="container w-full md:max-w-3xl mx-auto pt-20"><div class="w-full px-4 md:px-6 text-xl text-gray-800 leading-normal" style=font-family:Georgia,serif><div class=font-sans><h1 class="font-bold font-sans break-normal text-gray-900 pt-6 pb-2 text-3xl md:text-4xl">Shelf Network</h1></div><p>Books are nodes and edges are created if many consumers have both books on their shelves.</p><h1 id=edges><strong>Edges</strong></h1><p>An edge is created in the graph if,
$$e_{book_i, book_j} = \frac{C_{book_i, book_j}}{\min_{i, j}(C_{book_i}, C_{book_j})} \geq \frac{1}{2}$$
where $C_{book_i, book_j}$ is the number of shelves $book_i$ appears in which $book_j$ also appears in, likewise $C_{book_i}$ is the amount of shelves $book_i$ appears in.
This way the maximal value of $e_{book_i, book_j}$ is 1, and the value represents the chance of $book_i$ being on a shelf given $book_j$ is on that shelf (here it is assumed that $C_{book_i} \geq C_{book_j}$, as the reverse is not true).<br></p><p>The value 0.5 is chosen because we do not want a too densely connected graph, but we also want as many of the books to still be in the dataframe as possible. At last the value 0.5 also expresses that for an edge to be there, then the books must appear together at least in half of the shelves where the book that is in the least shelves appears.</p><h2 id=choice-of-threshhold>Choice of threshhold</h2><p><a href>TODO put in a picture of a distribution here</a>
There are 28,704,535 unique appearances together of the 7676 books, hence, if we did not create a threshhold the graph would have an average degree of 3740, which is half of the network size. We definitly need a threshhold to get a less connected graph.<br>We explored three different weighings for the edges.</p><ul><li>Purely appearances together</li><li>Appearances together, divided by the square root of appearance counts of the two books.</li><li>Appearances together, divided by the smallest appearance count of the two books.<br>The first method has the issue that books that appear more often in the dataset will be more likely to have appeared more times with the other books, hence, books that appear little will not be removed entirely from the if we use the first method of weighing. Therefore, we needed something more addaptive.<br>In the second method the edge weights are given by,
$$e_{book_i, book_j} = \frac{C_{book_i, book_j}}{\sqrt{C_{book_i} \cdot C_{book_j}}}.$$
This introduces a new issue, which is that if a book $book_i$ always appear together with $book_j$, but $book_j$ is much more frequent in the dataset, then the edge between these two books is small. This means that books that frequently appear in the dataset will always have small edge weights, and thus, will be removed if we set a threshhold. This is not ideal either, as *The Hunger Games* should probably always appear in shelves that have *Catching Fire* (the second Hunger Games book), but the other way around is probably not true, as people might not had read that far yet. These two books should definitly have a strong connection, as must users look at both.<br>The last method is the one we use. This is because all books have a chance of forming strong edges with all other books.
To evaluate if 0.5 is a possible threshold we try it, along with other thresholds, and observe how many books are completely dropped, and we look at the degree distribution. In these findings a threshhold in the range 0.4-0.5 is optimal, as the graph has almost all books included (7665-7539), but does not have insanly high degrees (33-15). We choose 0.5, because we want to distinguish the graph into communitites that are not too large, and because of the nice property that the books appear togther at least half of the time the least frequent book appears.</li></ul><h1 id=network><strong>Network</strong></h1><p>The network is implemented with <em>NetworkX</em> and <a href>TODO write about attributes here</a>. <a href>TODO write about Assortativity (genres and degree)</a></p><h1 id=communities><strong>Communities</strong></h1><p>We use the Louvain algorithm to partition our graph into communities. We get <a href>TODO insert the number of communities</a>, where the largest community is quite big and has <a href>TODO insert number of nodes in the largest community</a>. We calculate the modularity of this partition to be <a href>TODO insert here</a>, and check if this is significant. To do this we utilize the double edge swap algorithm to create a new graph, but where each node has the same degree as the previous graph. We do this <a href>TODO how many times?</a>, to check if the modularity of the true network is significantly different. Below you can see the histogram of modularities for the random networks, along with the modularity of the true network.
<img src=../images/dtu-logo.png alt> <a href>TODO insert the correct figure here</a>
We can see that the modularity of the true network is indeed an outlier, and we have likely found interesting communities.</p><h1 id=genres><strong>Genres</strong></h1><p>Next is the most interesting analysis we make. We use the communities found with the Louvain algorithm along with the true genres of the books (found with NLP analysis) to create a heatmap of the communities and genres. The heatmap is seen below.
<img src=../images/dtu-logo.png alt> <a href>TODO insert the correct figure here (genre vs. shelf heatmap)</a>
The number assigned to each cell is the number of books in that the corresponding community that also have the corresponding genre. The color of each cell is the ratio between the cells number and the sum of the column. This is to only highlight the cells that contain an entire genre.<br>As can be seen in this figure, most of the gernes are encapsulated by one community, however, this is mostly due to the large community that contains roughly a third of the books.
<a href>TODO comment on this further when we have the data. Maybe highlight a few community genre pairs</a></p><h1 id=word-clouds><strong>Word Clouds</strong></h1><p><a href>TODO comment on this when we have the data</a></p><hr class="border-b-2 border-gray-400 mt-8 mx-4"><div class="font-sans flex justify-between content-center px-4 pb-12"><div class=text-left><p><a href=../data-description class="break-normal text-base md:text-sm text-green-500 font-bold no-underline hover:underline">&lt;
Previous Page</a></p></div><div class=text-right><p><a href=../nlp-network class="break-normal text-base md:text-sm text-green-500 font-bold no-underline hover:underline">Next
Page ></a></p></div></div></div></div><footer class="bg-white border-t border-gray-400 shadow"><div class="container max-w-4xl mx-auto flex py-8"><div class="w-full mx-auto flex flex-col"><div class="flex w-full"><div class="px-8 mx-auto"><ul class="pt-3 list-none px-0 flex"><li><a class="text-gray-600 no-underline py-2" href=../explainer-notebook.html><i data-feather=file-text class=footer-icon></i></a></li><li><a class="text-gray-600 no-underline py-2" href=https://github.com/davidAlvaBro/webpage_for_comsum><i data-feather=github class=footer-icon></i></a></li><li><a class="text-gray-600 no-underline py-2" href=https://drive.google.com><i data-feather=hard-drive class=footer-icon></i></a></li></ul></div></div><div class="w-full mx-auto text-center"><ul class="list-reset items-center text-md py-6 list-none flex"><li class=mx-auto><p class="inline-block text-gray-600 mx-4 font-semibold capitalized">August Hertz Bugge</p></li><li class=mx-auto><p class="inline-block text-gray-600 mx-4 font-semibold capitalized">David Bro Ludvigsen</p></li><li class=mx-auto><p class="inline-block text-gray-600 mx-4 font-semibold capitalized">Sebastian Nicolai Fabricius Grut</p></li></ul></div></div></div></footer><script>var h=document.documentElement,b=document.body,st='scrollTop',sh='scrollHeight',progress=document.querySelector('#progress'),scrollpos=window.scrollY,header=document.getElementById("header"),navcontent=document.getElementById("nav-content"),scroll;document.addEventListener('scroll',function(){scroll=(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100,progress.style.setProperty('--scroll',scroll+'%'),scrollpos=window.scrollY,scrollpos>10?(header.classList.add("bg-white"),header.classList.add("shadow"),navcontent.classList.remove("bg-gray-100"),navcontent.classList.add("bg-white")):(header.classList.remove("bg-white"),header.classList.remove("shadow"),navcontent.classList.remove("bg-white"),navcontent.classList.add("bg-gray-100"))}),document.getElementById('nav-toggle').onclick=function(){document.getElementById("nav-content").classList.toggle("hidden")},feather.replace()</script></body></html>